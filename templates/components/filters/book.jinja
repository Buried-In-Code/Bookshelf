{% from "components/forms.jinja" import input %}
{% macro book_filter(action, show_read=False) %}
<div class="box">
  <h5 class="title is-5 has-text-link">Filter Books</h5>
  <form accept-charset="UTF-8" action="{{ action }}" method="GET">
    <div class="field">
      <label class="label has-text-info-light">Author</label>
      <div class="control is-expanded">
        <div class="select is-fullwidth is-rounded">
          <select name="author_id">
            <option value=0{% if not filters['author_id'] %} selected{% endif %}>Select Author</option>
            {% for _author in author_list %}
            <option value={{ _author.author_id }}{% if filters['author_id'] == _author.author_id %} selected{% endif %}>{{ _author.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>
    <div class="field">
      <label class="label has-text-info-light">Format</label>
      <div class="control is-expanded">
        <div class="select is-fullwidth is-rounded">
          <select name="format_id">
            <option value=""{% if not filters['format_id'] %} selected{% endif %}>Select Format</option>
            {% for _format in format_list %}
            <option value="{{ _format.format_id }}"{% if filters['format_id'] == _format.format_id %} selected{% endif %}>{{ _format.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>
    <div class="field">
      <label class="label has-text-info-light">Series</label>
      <div class="control is-expanded">
        <div class="select is-fullwidth is-rounded">
          <select name="series_id">
            <option value=0{% if not filters['series_id'] %} selected{% endif %}>Select Series</option>
            {% for _series in series_list %}
            <option value={{ _series.series_id }}{% if filters['series_id'] == _series.series_id %} selected{% endif %}>{{ _series.title }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>
    {{ input("Title", "title", value=filters['title'] or '') }}
    <div class="field">
      <label class="label has-text-info-light">Publisher</label>
      <div class="control is-expanded">
        <div class="select is-fullwidth is-rounded">
          <select name="publisher_id">
            <option value=0{% if not filters['publisher_id'] %} selected{% endif %}>Select Publisher</option>
            {% for _publisher in publisher_list %}
            <option value={{ _publisher.publisher_id }}{% if filters['publisher_id'] == _publisher.publisher_id %} selected{% endif %}>{{ _publisher.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>
    {% if show_read %}
    <div class="field">
      <label class="label has-text-info-light">Only Read</label>
      <div class="control is-expanded">
        <input id="read-switch" type="checkbox" name="read" class="switch is-link is-rounded"{% if filters['read'] %} checked{% endif %}>
        <label for="read-switch"></label>
      </div>
    </div>
    {% endif %}
    <div class="buttons is-centered">
      <button class="button is-link is-rounded">
        <span class="icon is-medium">
          <i class="fa-solid fa-lg fa-filter"></i>
        </span>
        <span>Filter</span>
      </button>
    </div>
  </form>
</div>
{% endmacro %}
